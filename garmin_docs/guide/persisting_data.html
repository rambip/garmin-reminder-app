<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Persisting Data - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>Persisting Data</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="persisting-data" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>Persisting Data</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">Persisting Data</h1><div class="body"><p class="p">Connect IQ is also able to save data from within an app at runtime. For example, an app may need to obtain or calculate data and store it for later use. This is accomplished by the use of Storage, Properties, and Settings.</p><ul class="ul"><li class="li"><p class="p"><em class="ph i">Storage</em> represents data written to disk so it may persist across executions of an application.</p></li><li class="li"><p class="p"><em class="ph i">Properties</em> are constant values defined at build time and included in the executable that are useful for product-specific values that shouldn't be defined in code. Properties may also define the default Settings values.</p></li><li class="li"><p class="p"><em class="ph i">Settings</em> are user-editable values modified through Garmin Connect Mobile and Garmin Express. Default settings values are defined by Properties.</p></li></ul></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="storage"><h2 class="title topictitle2" id="ariaid-title2">Storage</h2><div class="body"><p class="p">Storage is used for saving and retrieving data from the file system of the device at run time as defined by the developer. This data is only available to the application and is not accessible by the end user. For example, this feature could be used to store a location from when an app was last used. The next time the app is launched, Storage can provide the last known location to the app.</p><p class="p">The following data types may be stored:</p><ul class="ul"><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Number.html" target="_blank">Lang.Number</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Float.html" target="_blank">Lang.Float</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Long.html" target="_blank">Lang.Long</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Double.html" target="_blank">Lang.Double</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Char.html" target="_blank">Lang.Char</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/String.html" target="_blank">Lang.String</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Boolean.html" target="_blank">Lang.Boolean</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Array.html" target="_blank">Lang.Array</a></p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Dictionary.html" target="_blank">Lang.Dictionary</a></p></li></ul><p class="p">It is important to note that an <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Array.html" target="_blank">Lang.Array</a> or <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Dictionary.html" target="_blank">Lang.Dictionary</a> may only contain the data types listed above. For example, it is not possible to store a <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Symbol.html" target="_blank">Lang.Symbol</a> in an <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Array.html" target="_blank">Lang.Array</a> or <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Dictionary.html" target="_blank">Lang.Dictionary</a> in Storage.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="accessing-properties-and-settings-object-store"><h2 class="title topictitle2" id="ariaid-title3">Accessing Properties and Settings: Object Store</h2><div class="body"><p class="p">Prior to API level 2.4.0, all content was persisted in the object store. If your app runs on Connect IQ System 1 devices, you will need to use <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getProperty-instance_function" target="_blank">AppBase.getProperty()</a> and <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#setProperty-instance_function" target="_blank">AppBase.setProperty()</a> to persist data. These functions allow access to both settings and persisted data.</p><p class="p">The object store is a <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Dictionary.html" target="_blank">Lang.Dictionary</a> that lives in memory until your app terminates, at which point it is saved to disk. Because the object store costs against your runtime memory, do not use these methods unless you are running on System 1 devices.</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="accessing-properties-and-settings-object-store__entry__1">API</th><th class="entry align-left" id="accessing-properties-and-settings-object-store__entry__2">Purpose</th><th class="entry align-left" id="accessing-properties-and-settings-object-store__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="accessing-properties-and-settings-object-store__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#setProperty-instance_function" target="_blank">AppBase.setProperty()</a></td><td class="entry align-left" headers="accessing-properties-and-settings-object-store__entry__2">Retrieve information by key from the object store</td><td class="entry align-left" headers="accessing-properties-and-settings-object-store__entry__3">1.0.0</td></tr><tr class="row"><td class="entry align-left" headers="accessing-properties-and-settings-object-store__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getProperty-instance_function" target="_blank">AppBase.getProperty()</a></td><td class="entry align-left" headers="accessing-properties-and-settings-object-store__entry__2">Store information by key in the object store</td><td class="entry align-left" headers="accessing-properties-and-settings-object-store__entry__3">1.0.0</td></tr></tbody></table></div></article><article aria-labelledby="ariaid-title4" class="topic nested1" id="accessing-storage-applicationstorage"><h2 class="title topictitle2" id="ariaid-title4">Accessing Storage: <code class="ph codeph">Application.Storage</code></h2><div class="body"><p class="p"><em class="ph i">Since API level 2.4.0</em></p><p class="p">The <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html" target="_blank">Application.Storage</a> module manages persistent key-value pair data storage. Information is automatically saved on disk when <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html#setValue-instance_function" target="_blank">Storage.setValue()</a> is called. Keys and values are limited to 8 KB each, and a total of 128 KB of storage is available.</p><p class="p">For example, an application might save a location for later use with the code below:</p><pre class="pre codeblock java"><code>Storage.setValue("location", locationValue.toDegrees());</code></pre><p class="p">The next time the application is launched, the stored location value can be retrieved and displayed:</p><pre class="pre codeblock java"><code>var myLastLocation = Application.Storage.getValue("location");
dc.drawText(x, y, Graphics.FONT_SMALL, "Last location: " + myLastLocation, Graphics.TEXT_JUSTIFY_LEFT);</code></pre><p class="p">API level 3.2.0 introduced the ability to access the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html" target="_blank">Application.Storage</a> module from background processes. The background process can modify storage using <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html#setValue-instance_function" target="_blank">Storage.setValue()</a>, <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html#deleteValue-instance_function" target="_blank">Storage.deleteValue()</a> and <span class="xref"></span>. When the storage is written from the background process, <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onStorageChanged-instance_function" target="_blank">AppBase.onStorageChanged()</a> callback will be invoked for the foreground process if the background and foreground process are active at the same time and vice-versa. The application would then have to reload data from storage to reflect updated information.</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="accessing-storage-applicationstorage__entry__1">API</th><th class="entry align-left" id="accessing-storage-applicationstorage__entry__2">Purpose</th><th class="entry align-left" id="accessing-storage-applicationstorage__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="accessing-storage-applicationstorage__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html#getValue-instance_function" target="_blank">Storage.getValue()</a></td><td class="entry align-left" headers="accessing-storage-applicationstorage__entry__2">Retrieve information by key from persisted storage</td><td class="entry align-left" headers="accessing-storage-applicationstorage__entry__3">2.4.0</td></tr><tr class="row"><td class="entry align-left" headers="accessing-storage-applicationstorage__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html#setValue-instance_function" target="_blank">Storage.setValue()</a></td><td class="entry align-left" headers="accessing-storage-applicationstorage__entry__2">Store information by key in persisted storage</td><td class="entry align-left" headers="accessing-storage-applicationstorage__entry__3">2.4.0</td></tr></tbody></table></div></article><article aria-labelledby="ariaid-title5" class="topic nested1" id="accessing-properties-and-settings-applicationproperties"><h2 class="title topictitle2" id="ariaid-title5">Accessing Properties and Settings: <code class="ph codeph">Application.Properties</code></h2><div class="body"><p class="p"><em class="ph i">Since API level 2.4.0</em></p><p class="p">The <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html" target="_blank">Application.Properties</a> module provides an interface for accessing the values and properties of settings. Information is automatically saved on disk when <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onStop-instance_function" target="_blank">AppBase.onStop()</a> is called.  To get or set a property value use the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html#getValue-instance_function" target="_blank">Properties.getValue()</a> or <span class="xref"></span> methods, respectively:</p><pre class="pre codeblock java"><code>// Set an Object Store app setting
Properties.setValue("mySetting", mySetting);

// Get an Object Store app setting value
var mySetting = Properties.getValue("mySetting");</code></pre><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="accessing-properties-and-settings-applicationproperties__entry__1">API</th><th class="entry align-left" id="accessing-properties-and-settings-applicationproperties__entry__2">Purpose</th><th class="entry align-left" id="accessing-properties-and-settings-applicationproperties__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="accessing-properties-and-settings-applicationproperties__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html#getValue-instance_function" target="_blank">Properties.getValue()</a></td><td class="entry align-left" headers="accessing-properties-and-settings-applicationproperties__entry__2">Retrieve information by key from properties. Property values must be defined in a resources xml file in a <code class="ph codeph">&lt;properties&gt;</code> element. If a key that is not present in application properties is passed to <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html#getValue-instance_function" target="_blank">Properties.getValue()</a>, an exception will be thrown</td><td class="entry align-left" headers="accessing-properties-and-settings-applicationproperties__entry__3">2.4.0</td></tr><tr class="row"><td class="entry align-left" headers="accessing-properties-and-settings-applicationproperties__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html#setValue-instance_function" target="_blank">Properties.setValue()</a></td><td class="entry align-left" headers="accessing-properties-and-settings-applicationproperties__entry__2">Store information by key in persisted storage. Property values must be defined in the resource xml file in a <code class="ph codeph">&lt;properties&gt;</code> element. If a key that is not present in application properties is passed to <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html#setValue-instance_function" target="_blank">Properties.setValue()</a>, an exception will be thrown</td><td class="entry align-left" headers="accessing-properties-and-settings-applicationproperties__entry__3">2.4.0</td></tr></tbody></table></div></article><article aria-labelledby="ariaid-title6" class="topic nested1" id="which-api-should-i-use"><h2 class="title topictitle2" id="ariaid-title6">Which API Should I Use?</h2><div class="body"><p class="p">If your app runs on devices at API level 2.4.0 or above,  <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html" target="_blank">Application.Storage</a> offers a superior solution for persisting application data compared to the Object Store. Using the newer APIs in an existing app is simply a matter of updating code to call the new methods. However, there are a couple of important things of which to be aware:</p><ol class="ol"><li class="li"><p class="p">Object Store data files are not converted to the new format.</p><p class="p">If an app used storage prior to API level 2.4.0, existing properties will not automatically migrate to the new file format used by the  <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Storage.html" target="_blank">Application.Storage</a> module. If a conversion is needed, an app must include a routine to get the data from the old files and store it in the new format.</p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html" target="_blank">Application.Properties</a> will throw an exception if attempting to write to an undefined property. Prior to API level 2.4.0, an attempt to write to an undefined property would result in a value written to storage (the .STR file) since <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getProperty-instance_function" target="_blank">AppBase.getProperty()</a> and <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#setProperty-instance_function" target="_blank">AppBase.setProperty()</a> were overloaded to function with each of Storage, Properties, and Settings. This behavior will no longer occur when using the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties.html" target="_blank">Application.Properties</a> module since it is distinct from <span class="xref"></span>. Instead, an <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/Properties/InvalidKeyException.html" target="_blank">Properties.InvalidKeyException</a> is thrown.</p></li></ol><p class="p">To maximize the number of supported devices, use a <code class="ph codeph">has</code> check to see if the Storage API is available and then call the appropriate methods based on what the device supports:</p><pre class="pre codeblock typescript"><code>if ( Toybox.Application has :Storage ) {
    // use Application.Storage and Application.Properties methods
} else {
    // use Application.AppBase methods
}</code></pre><p class="p">For more, see the <code class="ph codeph">ApplicationStorage</code> sample app distributed with the SDK.</p></div></article></article></main></div>
</body>
</html>
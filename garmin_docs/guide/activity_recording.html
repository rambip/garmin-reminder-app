<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Activity Recording - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>Activity Recording</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="activity-recording" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>Activity Recording</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">Activity Recording</h1><div class="body"><p class="p">Imagine that you are trying to create a yoga app. You'd like the app to record heart rate and calories burned during your yoga workout, just like other Garmin apps. You'd also like the recording to be displayed on <a class="xref" href="https://connect.garmin.com" target="_blank">Garmin Connect</a>. Monkey C allows for apps to start and stop recording of FIT files. Controlling the FIT file recording requires a few steps:</p><ol class="ol"><li class="li"><p class="p">Enable the sensors to be recorded</p></li><li class="li"><p class="p">Use <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording.html#createSession-instance_function" target="_blank">ActivityRecording.createSession()</a> to create a session object</p></li><li class="li"><p class="p">Use the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html#start-instance_function" target="_blank">Session.start()</a> method of the FIT session to begin recording. Data from the enabled sensors will be recorded into the FIT file.</p></li><li class="li"><p class="p">Use <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html#stop-instance_function" target="_blank">Session.stop()</a> to pause the recording</p></li><li class="li"><p class="p">Use <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html#save-instance_function" target="_blank">Session.save()</a> to save the recording, or <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html#discard-instance_function" target="_blank">Session.discard()</a> to delete the recording</p></li></ol><p class="p">The FIT file will sync with <a class="xref" href="https://connect.garmin.com" target="_blank">Garmin Connect</a>. You can use the <a class="xref" href="https://developer.garmin.com/gc-developer-program/overview/" target="_blank">Garmin Connect Developer Program</a> to process the FIT file from a web service.</p><p class="p">For more, see the <code class="ph codeph">RecordSample</code> sample app distributed with the SDK.</p></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="recording-fit-files"><h2 class="title topictitle2" id="ariaid-title2">Recording FIT Files</h2><div class="body"><p class="p">In addition to being able to play back existing FIT files, the simulator can also record files using data obtained via the <em class="ph i">Fit Data</em>&gt;<em class="ph i">Simulate Data</em> menu option. To begin recording a session you must start the timer; this can be done via the <em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Start Activity</em> menu option, or by clicking the corresponding start button on the device you have selected. The following table describes the different options available for activity recording and provides instructions for how to access them via the menu bar, or the device buttons (where available).</p><table class="table"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="recording-fit-files__entry__1">Option</th><th class="entry align-left" id="recording-fit-files__entry__2">Menu Button</th><th class="entry align-left" id="recording-fit-files__entry__3">Device Button</th><th class="entry align-left" id="recording-fit-files__entry__4">Notes</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Start Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Start Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">Start Button</td><td class="entry align-left" headers="recording-fit-files__entry__4">The device start button starts and stops an activity.</td></tr><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Stop Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Stop Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">Start Button</td><td class="entry align-left" headers="recording-fit-files__entry__4">The device start button starts and stops an activity, and the <em class="ph i">Start Activity</em> menu item is renamed to <em class="ph i">Stop Activity</em> when recording is active.</td></tr><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Lap Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Lap Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">Back Button</td><td class="entry align-left" headers="recording-fit-files__entry__4">Records a lap record in the FIT file.</td></tr><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Pause Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Pause Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">N/A</td><td class="entry align-left" headers="recording-fit-files__entry__4">Pauses activity recording. Note this option is only available when FIT data simulation is enabled.</td></tr><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Resume Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Resume Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">N/A</td><td class="entry align-left" headers="recording-fit-files__entry__4">Resumes activity recording. Note this option is only available when FIT data simulation is enabled and activity recording is paused.</td></tr><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Discard Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Discard Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">N/A</td><td class="entry align-left" headers="recording-fit-files__entry__4">Discards the current recording and deletes the corresponding .fit file. Note this is only enabled if activity recording has been started and subsequently stopped.</td></tr><tr class="row"><td class="entry align-left" headers="recording-fit-files__entry__1">Save Activity</td><td class="entry align-left" headers="recording-fit-files__entry__2"><em class="ph i">Data Fields</em>&gt;<em class="ph i">Timer</em>&gt;<em class="ph i">Save Activity</em></td><td class="entry align-left" headers="recording-fit-files__entry__3">N/A</td><td class="entry align-left" headers="recording-fit-files__entry__4">Saves the recorded activity into a .fit file and resets the timer state. Note this is only enabled if activity recording has been started and subsequently stopped.</td></tr></tbody></table><p class="p">Note: the device simulator will not automatically start activity recording when a data field is being run. You must explicitly start and stop activity recording via the menu options described here.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="fit-developer-fields"><h2 class="title topictitle2" id="ariaid-title3">FIT Developer Fields</h2><div class="body"><p class="p">Now imagine you want to add a new metric - Namastes - to the Yoga app <code class="ph codeph">namaste</code>. This metric will combine heart rate, accelerometer, and other sensor data into a single value, and does not have an analog in any Garmin recording metric. To do this we need the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/FitContributor.html" target="_blank">Toybox.FitContributor</a> module, which allows you to add new metrics to a FIT recording and display it on <a class="xref" href="https://connect.garmin.com" target="_blank">Garmin Connect</a>.</p><p class="p">First, you must enable the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/FitContributor.html" target="_blank">Toybox.FitContributor</a> permission in the manifest file (see the <a class="xref" href="Manifest_and_Permissions.html#manifest-file-and-permissions">Manifest and Permissions</a> section for more information). Next, you need to add your field definitions in your resources using the <code class="ph codeph">fitContributions</code> block:</p><pre class="pre codeblock xml"><code>    &lt;strings&gt;
        &lt;string id="namaste_label"&gt;Namastes&lt;/string&gt;
        &lt;string id="namaste_graph_label"&gt;Namastes&lt;/string&gt;
        &lt;string id="namaste_units"&gt;N(s)&lt;/string&gt;
    &lt;/strings&gt;
    &lt;fitContributions&gt;
        &lt;fitField id="0" displayInChart="true" sortOrder = "0" precision="2"
        chartTitle="@Strings.namaste_graph_label" dataLabel="@Strings.namaste_label"
        unitLabel="@Strings.namaste_units" fillColor="#FF0000" /&gt;
    &lt;/fitContributions&gt;</code></pre><p class="p">The <code class="ph codeph">fitField</code> block has a number of configurable options:</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-center" id="fit-developer-fields__entry__1">Attribute</th><th class="entry align-left" id="fit-developer-fields__entry__2">Value</th><th class="entry align-left" id="fit-developer-fields__entry__3">Notes</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">id</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">A numeric value from 0 to 255 used to refer to your field</td><td class="entry align-left" headers="fit-developer-fields__entry__3">No duplicates within an app are allowed</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">displayInChart</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">Indicates whether or not record level connect IQ data should be rendered in a chart</td><td class="entry align-left" headers="fit-developer-fields__entry__3"><code class="ph codeph">true</code> if you want this entry to be displayed as a chart, <code class="ph codeph">false</code> otherwise. Graph fields can only support numeric data.</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">displayInActivityLaps</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">Indicates whether or not lap level connect IQ data should be rendered in the Activity Laps section in the Garmin Connect Activity Details page</td><td class="entry align-left" headers="fit-developer-fields__entry__3"><code class="ph codeph">true</code> if you want this entry to be displayed in the activity laps, <code class="ph codeph">false</code> otherwise</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">displayInActivitySummary</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">Indicates whether or not activity (fit session) level connect IQ data should be rendered in the Activity Summary section in the Garmin Connect Activity Details page</td><td class="entry align-left" headers="fit-developer-fields__entry__3"><code class="ph codeph">true</code> if you want this entry to be displayed in the activity summary data, <code class="ph codeph">false</code> otherwise</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">sortOrder</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">Determines the order in which the Connect IQ data will appear in the Summary or Lap Sections of the Activity Details page and what order charts will be displayed on the Activity Details page</td><td class="entry align-left" headers="fit-developer-fields__entry__3">No duplicates are allowed</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">precision</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">Decimal point precision for numeric data</td><td class="entry align-left" headers="fit-developer-fields__entry__3">0 for integer, 1 for one decimal point, 2 for two decimal points. Without this attribute the default is no rounding</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">chartTitle</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">This is the resources string key to use to render the title of the chart</td><td class="entry align-left" headers="fit-developer-fields__entry__3">Optional if <code class="ph codeph">displayInChart</code> is <code class="ph codeph">false</code>. Must be a string resource.</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">dataLabel</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">This is the resources string key to use to render the label of the data field in the Activity Summary or Activity Laps section of the Activity Details page (ex. Cadence, or Heart Rate).</td><td class="entry align-left" headers="fit-developer-fields__entry__3">Must be a string resource</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">unitLabel</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">This is the key to use to render the unit of the data field in the Activity Summary or Activity Laps section of the Activity Details page (ex. kph, or miles).</td><td class="entry align-left" headers="fit-developer-fields__entry__3">Must be a string resource</td></tr><tr class="row"><td class="entry align-center" headers="fit-developer-fields__entry__1"><code class="ph codeph">fillColor</code></td><td class="entry align-left" headers="fit-developer-fields__entry__2">RRGGBB value of color to use for chart</td><td class="entry align-left" headers="fit-developer-fields__entry__3">Optional if <code class="ph codeph">displayInChart</code> is <code class="ph codeph">false</code></td></tr></tbody></table><p class="p">This will communicate the metadata to display our chart to <a class="xref" href="https://connect.garmin.com" target="_blank">Garmin Connect</a>. Now we need to create our Field in the code. You do this by using the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html#createField-instance_function" target="_blank">Session.createField()</a> method of the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html" target="_blank">ActivityRecording.Session</a> object within your source:</p><pre class="pre codeblock java"><code>// Field ID from resources.
const NAMASTE_FIELD_ID = 0;
hidden var mNamasteField;

// Initializes the new Namaste field in the activity file
function setupField(session as Session) {
    // Create a new field in the session.
    // Current namastes provides an file internal definition of the field
    // Field id _must_ match the fitField id in resources or your data will not display!
    // The field type specifies the kind of data we are going to store. For Record data this must be numeric, for others it can also be a string.
    // The mesgType allows us to say what kind of FIT record we are writing.
    //    FitContributor.MESG_TYPE_RECORD for graph information
    //    FitContributor.MESG_TYPE_LAP for lap information
    //    FitContributor.MESG_TYPE_SESSION` for summary information.
    // Units provides a file internal units field.
    mNamasteField = session.createField("current_namastes", NAMASTE_FIELD_ID, FitContributor.DATA_TYPE_FLOAT, { :mesgType=&gt;Fit.MESG_TYPE_RECORD, :units=&gt;"N" });
}</code></pre><p class="p">Now when you call <span class="xref"></span> on <code class="ph codeph">mNamasteField</code> the value will be recorded into either the Record, Lap, or Session information of the FIT file based on the message type specified when calling <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/ActivityRecording/Session.html#createField-instance_function" target="_blank">Session.createField()</a>. If you are creating a Record (graph), you should update this value once a second. For lap and summary, you should provide constant updates to the current lap or workout value for the metric.</p><p class="p">After setting this up, you will want to preview how this will look on <a class="xref" href="https://connect.garmin.com" target="_blank">Garmin Connect</a>. We can use the Monkey graph tool to create a preview. The <a class="xref" href="../Reference_Guides/Monkey_Graph_Reference.html#using-the-monkey-graph-tool">Monkey graph tool</a> requires the following: a FIT file with the recorded developer data, and an IQ file of the app (you can acquire an IQ file via the <a class="xref" href="Publishing_to_the_Store.html#publishing-to-the-connect-iq-store">App Export Wizard</a>. The tool will allow you to test how charts will look before uploading your app for review. See how to launch the Monkey graph tool included with the SDK.</p></div></article></article></main></div>
</body>
</html>
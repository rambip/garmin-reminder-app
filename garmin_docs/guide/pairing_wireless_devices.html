<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pairing Wireless Devices - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>Pairing Wireless Devices</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="sensor-pairing" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>Sensor Pairing</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">Sensor Pairing</h1><div class="body"><p class="p"><em class="ph i">Since API level 5.1.0</em></p><p class="p">If your device application or data field communicates wirelessly with a sensor or peripheral using ANT, ANT plus or Bluetooth Low Energy (BLE), then you will need to implement a pairing process. Connect IQ allows you to implement a <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a> that allows you to have your device pair as part of the device’s sensor paring UI flow.</p></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="implementing-a-sensordelegate"><h2 class="title topictitle2" id="ariaid-title2">Implementing a SensorDelegate</h2><div class="body"><p class="p">For the system to know that your device application or data field supports the native pairing flow, you will need your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getSensorDelegate-instance_function" target="_blank">AppBase.getSensorDelegate()</a> to return your implementation of your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a>. In your delegate, your implementation of <span class="xref"></span> must return <code class="ph codeph">true</code> to participate in a scan.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="scanning-for-your-device"><h2 class="title topictitle2" id="ariaid-title3">Scanning for Your Device</h2><div class="body"><p class="p">When the user has the device scan for sensors, the system will start your app without a UI, request your sensor delegate and call your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onScan-instance_function" target="_blank">SensorDelegate.onScan()</a>. During this time, you can begin scanning for ANT or BLE devices.</p><p class="p">If your scan reveals any devices, populate a Sensor.SensorInfo with the information and call Sensor.notifyNewSensor() for each device you detect. When your scan is complete, call <span class="xref"></span> to inform the system that you are done scanning. Since other apps also may need to scan for devices, use a realistic timeout, and notify quickly if no devices are detected.</p></div></article><article aria-labelledby="ariaid-title4" class="topic nested1" id="pairing-a-device"><h2 class="title topictitle2" id="ariaid-title4">Pairing a Device</h2><div class="body"><p class="p">The user will be presented with a list of devices to choose from. If a device associated with your app is selected, your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a> will be re-instantiated, and the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onPair-instance_function" target="_blank">SensorDelegate.onPair()</a> will be called with the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorInfo.html" target="_blank">Sensor.SensorInfo</a> passed as a parameter. At this point, your app should do the necessary steps to pair the device. On ANT, this could be as simple as capturing the device id and persisting it, or with BLE it could involve persisting the ScanResult or establishing a bonded connection. Call <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyPairComplete-instance_function" target="_blank">Sensor.notifyPairComplete()</a> to complete the process.</p></div></article><article aria-labelledby="ariaid-title5" class="topic nested1" id="unpairing-a-device"><h2 class="title topictitle2" id="ariaid-title5">Unpairing a Device</h2><div class="body"><p class="p">Once your device is paired, it can be managed in the device Sensors list. The user can request that the system unpair from a device, as well. When requested, your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onUnpair-instance_function" target="_blank">SensorDelegate.onUnpair()</a> will be invoked. Do the necessary cleanup and call <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyUnpairComplete-instance_function" target="_blank">Sensor.notifyUnpairComplete()</a> to complete the process.</p></div></article><article aria-labelledby="ariaid-title6" class="topic nested1" id="pairing-with-your-data-field-or-application"><h2 class="title topictitle2" id="ariaid-title6">Pairing with Your Data Field or Application</h2><div class="body"><p class="p">If you add support for the native pairing flow, users will be prompted to pair with your sensor when the data field is installed. Applications typically want to pair devices as part of a setup flow. You can use <code class="ph codeph">System.exitTo(new Intent("system://pairing", {}))</code> to exit the user to the native sensor scanning process.</p></div></article><article aria-labelledby="ariaid-title7" class="topic nested1" id="testing-in-the-simulator"><h2 class="title topictitle2" id="ariaid-title7">Testing in the Simulator</h2><div class="body"><p class="p">If you’d like to test your pairing code in the Connect IQ simulator, use the <em class="ph i">Settings &gt; Manage Sensors</em> option. Using the <em class="ph i">Add</em> button will trigger your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a>.</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="testing-in-the-simulator__entry__1">API</th><th class="entry align-left" id="testing-in-the-simulator__entry__2">Description</th><th class="entry align-center" id="testing-in-the-simulator__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getSensorDelegate-instance_function" target="_blank">AppBase.getSensorDelegate()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Returns the implementation of a sensor delegate. Implement this method to communicate your app supports the native pairing flow.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onScan-instance_function" target="_blank">SensorDelegate.onScan()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Scan for devices supported by your app.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onPair-instance_function" target="_blank">SensorDelegate.onPair()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Complete the pairing process for a specific device.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onUnpair-instance_function" target="_blank">SensorDelegate.onUnpair()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Unpair a specific device from your app.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><span class="xref"></span></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Tell the system your app has completed a scan.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyPairComplete-instance_function" target="_blank">Sensor.notifyPairComplete()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Tell the system your app has completed pairing a device</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyUnpairComplete-instance_function" target="_blank">Sensor.notifyUnpairComplete()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Tell the system your app has completed unpairing a device</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr></tbody></table></div></article></article></main></div>
</body>
</html>
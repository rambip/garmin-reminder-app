<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Application and System Modules - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>Application and System Modules</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="application-and-system-modules" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>Application and System Modules</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">Application and System Modules</h1><div class="body"><p class="p">Every application has to have a class that extends <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html" target="_blank">Application.AppBase</a>. This object, known as the application object, is the handler for application lifecycle events.</p><p class="p">The Application object must be specified in the application <code class="ph codeph">manifest.xml</code>. This is used by the build tools to denote which class to load at startup. See the <a class="xref" href="Manifest_and_Permissions.html#manifest-file-and-permissions">Manifest and Permissions</a> section for more information.</p></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="install-and-uninstall"><h2 class="title topictitle2" id="ariaid-title2">Install and Uninstall</h2><div class="body"><p class="p"><em class="ph i">Since API level 3.0.0</em></p><p class="p">Your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html" target="_blank">Application.AppBase</a> has two handlers that are called on during installations and updates:</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="install-and-uninstall__entry__1">API</th><th class="entry align-left" id="install-and-uninstall__entry__2">Description</th><th class="entry align-left" id="install-and-uninstall__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="install-and-uninstall__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onAppInstall-instance_function" target="_blank">AppBase.onAppInstall()</a></td><td class="entry align-left" headers="install-and-uninstall__entry__2">Callback method that is triggered in the background when the app is installed</td><td class="entry align-left" headers="install-and-uninstall__entry__3">3.0.0</td></tr><tr class="row"><td class="entry align-left" headers="install-and-uninstall__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onAppUpdate-instance_function" target="_blank">AppBase.onAppUpdate()</a></td><td class="entry align-left" headers="install-and-uninstall__entry__2">Callback method that is triggered in the background when the app is updated</td><td class="entry align-left" headers="install-and-uninstall__entry__3">3.0.0</td></tr></tbody></table><p class="p">Both of these require that your application has the <code class="ph codeph">Background</code> permission. Potential use cases include registering a background service on install or starting an authentication method.</p><p class="p">These methods are not guaranteed to run. Do not depend on them for essential functionality.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="application-lifecycle"><h2 class="title topictitle2" id="ariaid-title3">Application Lifecycle</h2><div class="body"><p class="p"><em class="ph i">Since API level 4.2.0</em>
There are four main application lifecycle states: launched, active, inactive, and suspended</p><figure class="fig fignone">
<img class="image" src="/connect-iq/resources/programmers-guide/app-lifecycle.png"/><br/>
</figure></div><article aria-labelledby="ariaid-title4" class="topic nested2" id="launch"><h3 class="title topictitle3" id="ariaid-title4">Launch</h3><div class="body"><p class="p">After your application is loaded, your application object will be instantiated. From that point forward it will be available throughout the application by calling <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application.html#getApp-instance_function" target="_blank">Application.getApp()</a>.</p><p class="p">After you application object is instantiated, the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onStart-instance_function" target="_blank">AppBase.onStart()</a> function will be called. This is your opportunity to initialize the application and restore state.</p><p class="p">If your application is launched via an <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System/Intent.html" target="_blank">System.Intent</a>, the state parameter will contain arguments passed via the intent. Do not attempt to push a <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/WatchUi/View.html" target="_blank">WatchUi.View</a> instance at this time. See the <a class="xref" href="/connect-iq/core-topics/intents/">Intents</a> section for more information.</p><p class="p">Once your application is loaded, the system will request the initial view for your application. Depending on what functionality your application implements, you may have to implement several of the following handlers:</p><ul class="ul"><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getInitialView-instance_function" target="_blank">AppBase.getInitialView()</a>: The primary method for app startup. Return the base view for your watch face, data field, widget, or device app.</p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getGlanceView-instance_function" target="_blank">AppBase.getGlanceView()</a>: If your are implementing a widget that has a glance, this will be called when the user goes to browse your glance in the glance list. See the <a class="xref" href="/connect-iq/core-topics/glances/">Glances</a> section for more information.</p></li><li class="li"><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getGoalView-instance_function" target="_blank">AppBase.getGoalView()</a>: If your watch face is overriding the goal views, this gives you an opportunity to present your goal view.</p></li><li class="li"><p class="p"><span class="xref"></span>: If you are implementing an audio content provider, this method is called when you need to present playback options to the user.</p></li></ul><p class="p">All of these functions return an array: The first item is the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/WatchUi/View.html" target="_blank">WatchUi.View</a> instance, and the second is the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/WatchUi/InputDelegate.html" target="_blank">WatchUi.InputDelegate</a> instance that handles the input for the view.</p><p class="p">Apps will behave differently when they are launched from the glance list versus the activity menu. If an app is launched from the glance list, a timeout will be applied to the app. If the user does not exit the app within a given time frame, the system will terminate the app and return to the home screen. If an app is launched from the activity menu, however, it will not time out, and the user must explicitly exit your application.</p><p class="p">You can detect which way the user enters your application using the following method:</p><pre class="pre codeblock typescript"><code>class MySuperApp extends Application.AppBase {
    // if state contains the :resume key and the value
    // is true, then restore app state

    function onStart(state) {
         if ((state != null) &amp;&amp; (state.get(:launchedFromGlance)) {
            // Launched from glance
        } else {
            // Launched from activity menu
        }
    }
}</code></pre></div></article><article aria-labelledby="ariaid-title5" class="topic nested2" id="active-inactive-and-suspended"><h3 class="title topictitle3" id="ariaid-title5">Active, Inactive, and Suspended</h3><div class="body"><p class="p"><em class="ph i">Since API level 4.2.0</em></p><p class="p">Some devices have a task switcher that makes it easy to switch between activities and apps on the device. This can switch your app from <em class="ph i">active</em> to <em class="ph i">inactive</em>. To take full advantage of the task switcher, you need to utilize the full app lifecycle.</p><table class="table"><caption></caption><colgroup><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="active-inactive-and-suspended__entry__1">State</th><th class="entry align-left" id="active-inactive-and-suspended__entry__2">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__1">Active</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__2"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onActive-instance_function" target="_blank">AppBase.onActive()</a> is called when your app is transitioning from the inactive to active state. Active apps have access defined by the app type. When transitioning from inactive to active, access to sensors, ANT/BLE, will be restored.</td></tr><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__1">Inactive</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__2"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onInactive-instance_function" target="_blank">AppBase.onInactive()</a> is called when transitioning from the active to inactive state.</td></tr></tbody></table><p class="p">Based on the state your app is running in, you will have different levels of access to system resources:</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="active-inactive-and-suspended__entry__7">State</th><th class="entry align-left" id="active-inactive-and-suspended__entry__8">Active</th><th class="entry align-left" id="active-inactive-and-suspended__entry__9">Inactive</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__7">Activity</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__8">With permission, you may be allowed to start and stop activity recording.</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__9">If the app is recording an activity, recording will continue. If the app is not recording, it is not allowed to start or stop activity recording.</td></tr><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__7">GPS</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__8">GPS access may be denied if another app is recording an activity.</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__9">If the app is recording an activity and receiving position events, it will continue to receive events in the inactive state. If the app is not recording an activity, it is blocked from modifying the GPS state.</td></tr><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__7">ANT</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__8">ANT access may be denied if another app is recording an activity.</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__9">If the app is recording an activity, ANT access is permitted. If the app is not recording an activity, all open channels will be closed and will be reopened when transitioning from inactive to active.</td></tr><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__7">High Frequency Sensors (Accelerometer, Magnetometer, Gyro)</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__8">If the app is recording an activity, access is permitted. If the app is not recording an activity, access may fail in a non-fatal way.</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__9">If the app is recording an activity, access will be permitted. Otherwise, measurements can be retrieved at a maximum of 10 hz.</td></tr><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__7">Sensors</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__8">If the app is recording an activity, access is permitted. If the app is not recording an activity, access may fail in a non-fatal way.</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__9">If the app is recording an activity, access will be permitted. Otherwise, sensor access will be limited.</td></tr><tr class="row"><td class="entry align-left" headers="active-inactive-and-suspended__entry__7">Attention</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__8">Access is allowed.</td><td class="entry align-left" headers="active-inactive-and-suspended__entry__9">Access is denied.</td></tr></tbody></table><p class="p">There may be scenarios where the user has launched more apps than the system has resources to support. If your app is not active but is still running, the system may terminate your app to free up resources.</p><p class="p">When this happens, your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onStop-instance_function" target="_blank">AppBase.onStop()</a> will be called with a :suspend option to inform you that you are being terminated. You can use this call to persist your state for when you are resumed. When the user returns to your application, you will be called with a <code class="ph codeph">:resume</code> option on your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onStart-instance_function" target="_blank">AppBase.onStart()</a>. You can then restore your state from storage:</p><pre class="pre codeblock typescript"><code>class MyApp  extends Application.AppBase {
    // if state contains the :resume key and the value is true
    // then restore app state
    function onStart(state) {
        if ((state != null) &amp;&amp; (state.get(:resume)) {
                restoreState();
        }
    }

    // if state contains the :suspend key and the value is
    // true, then save app state
     function onStop(state) {
        if ((state != null) &amp;&amp; (state.get(:suspend)) {
            saveState();
        }
    }
}</code></pre><p class="p">If you do nothing, the user will return to your app as if it was just launched.</p></div></article><article aria-labelledby="ariaid-title6" class="topic nested2" id="app-termination"><h3 class="title topictitle3" id="ariaid-title6">App Termination</h3><div class="body"><p class="p">When your application is terminated, the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#onStop-instance_function" target="_blank">AppBase.onStop()</a> function  is called. This gives your application the option to save state before termination.</p></div></article></article><article aria-labelledby="ariaid-title7" class="topic nested1" id="widgets"><h2 class="title topictitle2" id="ariaid-title7">Widgets</h2><div class="body"><p class="p"><em class="ph i">Since API level 4.0.0</em></p><p class="p">On devices with API level 4.0 and below, there is the widget app type. Widgets are apps that run from a carousel accessible from the watch face. On devices after API 4.0.0, widgets are now from the app launcher, and apps can have glances. The glance list is accessible to the user while they are in an activity, and your apps can be launched from the glance list while the user is recording an activity.</p><p class="p">Widgets still build and run for API level 4.0 products without modification. However, you now must create a glance if you want the widget to show in the glance list. If you are building an app, creating a glance for your application gives users two unique ways to launch your app.</p></div></article><article aria-labelledby="ariaid-title8" class="topic nested1" id="system"><h2 class="title topictitle2" id="ariaid-title8">System</h2><div class="body"><p class="p">The <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html" target="_blank">Toybox.System</a> module provides access to the device state, settings, and metadata. Here you can get runtime information about the device that is running your app, and exercise some execution control.</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="system__entry__1">API</th><th class="entry align-left" id="system__entry__2">Description</th><th class="entry align-left" id="system__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#error-instance_function" target="_blank">System.error()</a></td><td class="entry align-left" headers="system__entry__2">Write an error to the console and exit the system</td><td class="entry align-left" headers="system__entry__3">1.0.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#exit-instance_function" target="_blank">System.exit()</a></td><td class="entry align-left" headers="system__entry__2">End execution of the current app</td><td class="entry align-left" headers="system__entry__3">1.0.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#exitTo-instance_function" target="_blank">System.exitTo()</a></td><td class="entry align-left" headers="system__entry__2">Exit the current app and launch a new app</td><td class="entry align-left" headers="system__entry__3">2.2.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#getClockTime-instance_function" target="_blank">System.getClockTime()</a></td><td class="entry align-left" headers="system__entry__2">Get the current clock time</td><td class="entry align-left" headers="system__entry__3">1.0.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#getDeviceSettings-instance_function" target="_blank">System.getDeviceSettings()</a></td><td class="entry align-left" headers="system__entry__2">Get the user settings for the device as well as the device metadata<a href="#fntarg_1" name="fnsrc_1"><sup>1</sup></a></td><td class="entry align-left" headers="system__entry__3">1.0.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#getSystemStats-instance_function" target="_blank">System.getSystemStats()</a></td><td class="entry align-left" headers="system__entry__2">Get runtime statistics for your current runtime</td><td class="entry align-left" headers="system__entry__3">1.0.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#isAppInstalled-instance_function" target="_blank">System.isAppInstalled()</a></td><td class="entry align-left" headers="system__entry__2">Query the system to see if another app is installed</td><td class="entry align-left" headers="system__entry__3">3.2.0</td></tr><tr class="row"><td class="entry align-left" headers="system__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#print-instance_function" target="_blank">System.print()</a>, <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#println-instance_function" target="_blank">System.println()</a></td><td class="entry align-left" headers="system__entry__2">Writes a message to the console or application log</td><td class="entry align-left" headers="system__entry__3">1.0.0</td></tr></tbody></table></div></article><div class="fn"><a href="#fnsrc_1" name="fntarg_1"><sup>1</sup></a>  Connect IQ's hottest API is <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/System.html#getDeviceSettings-instance_function" target="_blank">System.getDeviceSettings()</a>. This API has everything: user alarms, device settings, connection state, units, Connect IQ API level, monkeys...</div></article></main></div>
</body>
</html>
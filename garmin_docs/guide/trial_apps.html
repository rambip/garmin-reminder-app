<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Trial Apps - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>Trial Apps</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="app-trials" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>App Trials</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">App Trials</h1><div class="body"><p class="p"><em class="ph i">Since API level 2.3.0</em></p><p class="p">The app trials feature allows developers to enable a special "trial" mode for their app. Enabling trial mode is accomplished by adding a new tag to the manifest under the application tag as follows:</p><pre class="pre codeblock xml"><code>&lt;iq:application entry="CommExample" id="a3421feed289106a538cb9547ab12095"
        name="AppName" launcherIcon="LauncherIcon" type="widget" minSdkVersion="1.3.1"&gt;
    &lt;iq:trialMode enable="true"&gt;
        &lt;iq:unlockURL&gt;https://a.custom.unlock.url.info&lt;/iq:unlockURL&gt;
    &lt;/iq:trialMode&gt;
&lt;/iq:application&gt;</code></pre><p class="p">The unlock URL provides an endpoint for the app store to redirect the user to in order go through whatever you want your app "unlock" process to be. The app store will only accept secured HTTPS-URLs when uploading your iq-file. Also make sure that the enable-attribute of the <code class="ph codeph">trialMode</code> tag is set to "true".</p><p class="p">The app trials feature is not supported for watch faces.</p></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="trial-mode-functionality"><h2 class="title topictitle2" id="ariaid-title2">Trial Mode Functionality</h2><div class="body"><p class="p">Developers can query the  <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#isTrial-instance_function" target="_blank">AppBase.isTrial()</a> method to determine if trial mode is active for their app, which can be used to trigger special trial-mode functionality. App trials can also be time-based. The method <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getTrialDaysRemaining-instance_function" target="_blank">AppBase.getTrialDaysRemaining()</a> should be overridden if you wish to support a time-based trial. <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getTrialDaysRemaining-instance_function" target="_blank">AppBase.getTrialDaysRemaining()</a> must return a <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Lang/Number.html" target="_blank">Lang.Number</a> that represents how many days are remaining in the trial, or null if time-based trials are to be disabled. If <code class="ph codeph">0</code> is returned, the app will be prevented from running as the trial will be considered "expired".</p><p class="p">By default, when an app is in trial mode, the system will push special trial notifications to the use either to inform them of how many days remain in their trial (if you've overridden <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getTrialDaysRemaining-instance_function" target="_blank">AppBase.getTrialDaysRemaining()</a> to return a non-null value), or more generally that trial mode is active. If you do not wish for these notifications to be displayed to the user, you can override <span class="xref"></span> to return <code class="ph codeph">false</code>.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="trial-app-server-api"><h2 class="title topictitle2" id="ariaid-title3">Trial App Server API</h2><div class="body"><p class="p">Once the app is available in the store, the user can unlock the app by clicking on the unlock button in the store. At this point, the app store will redirect to the provided unlock-URL, adding these parameters to the URL:</p><table class="table"><caption></caption><colgroup><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="trial-app-server-api__entry__1">Parameter Name</th><th class="entry align-left" id="trial-app-server-api__entry__2">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="trial-app-server-api__entry__1"><code class="ph codeph">callbackUrl</code></td><td class="entry align-left" headers="trial-app-server-api__entry__2">The URL that has to be called back when the unlock-process on your side successfully finished.</td></tr><tr class="row"><td class="entry align-left" headers="trial-app-server-api__entry__1"><code class="ph codeph">appUnlockRequestId</code></td><td class="entry align-left" headers="trial-app-server-api__entry__2">The app store's internal unlock-ID which can be stored by the app-developer as reference.</td></tr><tr class="row"><td class="entry align-left" headers="trial-app-server-api__entry__1"><code class="ph codeph">appPageUrl</code></td><td class="entry align-left" headers="trial-app-server-api__entry__2">The app details page of the app to be unlocked. You should redirect to this page after a successful call to the callback-URL, and ask the user to download the unlocked app for his desired device.</td></tr></tbody></table><p class="p">So this is what a typical/complete call from the app store to your unlock-URL will look like:</p><pre class="pre codeblock"><code>https://your.unlock.url.com?appUnlockRequestId=1fe443e5-e76c-4e1c-b82b-2d084bd4c4fe&amp;callbackUrl=https%3A%2F%2Fapps.garmin.com%2FappUnlock%3FappUnlockRequestId%3D1fe443e5-e76c-4e1c-b82b-2d084bd4c4fe&amp;appPageUrl=https%3A%2F%2Fapps.garmin.com%2Fen-US%2Fapps%2Fbf1d944a-8a54-41fa-b7b0-24e651dc88e1</code></pre><p class="p">Both the <code class="ph codeph">callbackUrl</code> and the <code class="ph codeph">appPageUrl</code> will be passed in URL-encoded form.</p></div></article><article aria-labelledby="ariaid-title4" class="topic nested1" id="how-to-use-the-callbackurl"><h2 class="title topictitle2" id="ariaid-title4">How to use the <code class="ph codeph">callbackUrl</code></h2><div class="body"><p class="p">The <code class="ph codeph">callbackUrl</code>-endpoint is secured and can only be used with a (one-legged) OAuth1-signed request.</p><p class="p">For this you'll need to obtain your individual set of key/secret credentials from the app store's "Developer Dashboard":</p><p class="p">With these credentials you simply create a standard OAuth1-request and fire it to the callback-URL.
(Using a framework which generates all the necessary OAuth-HTTP-Headers is recommended.)</p><p class="p">A straightforward Java example (using the Signpost-library, and Apache's HttpClient) would look like this:</p><pre class="pre codeblock java"><code>HttpGet request = new HttpGet("callbackUrl");

OAuthConsumer consumer = new CommonsHttpOAuthConsumer("yourKey", "yourSecret");
consumer.sign(request);

HttpClient client = HttpClientBuilder.create().build();
HttpResponse response = client.execute(request);

System.out.println("Return code: " + org.springframework.http.HttpStatus.valueOf(response.getStatusLine().getStatusCode()));</code></pre><p class="p">The following return-codes can be expected:</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="how-to-use-the-callbackurl__entry__1">Status Code</th><th class="entry align-left" id="how-to-use-the-callbackurl__entry__2">Status Phrase</th><th class="entry align-left" id="how-to-use-the-callbackurl__entry__3">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">200</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">OK</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">Everything worked just fine; the app got marked as "unlocked" for the user.</td></tr><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">202</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">Accepted</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">When making a successful test-request (see below).</td></tr><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">401</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">Unauthorized</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">When the authorization (OAuth) was incorrect.</td></tr><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">404</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">Not Found</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">When the requested unlock item was not found.</td></tr><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">409</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">Conflict</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">When an app is already being marked as unlocked in the app store.</td></tr><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">410</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">Gone</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">When an app is orphaned (e.g. because the app changed ownership due to GDPR).</td></tr><tr class="row"><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__1">510</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__2">Internal Server Error</td><td class="entry align-left" headers="how-to-use-the-callbackurl__entry__3">When an unexpected error occurred.</td></tr></tbody></table><p class="p">You can test your OAuth-implementation without the need of an actual unlock-request.</p><p class="p">Just make a signed call using your credentials and "test" as <code class="ph codeph">appUnlockRequestId</code>.</p><pre class="pre codeblock"><code>https://apps.garmin.com/appUnlock?appUnlockRequestId=test</code></pre><p class="p">When receiving a 202, you can be sure that your OAuth-handling is working.</p></div></article></article></main></div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>HTTPS - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>HTTPS</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="json-rest-requests" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>JSON REST Requests</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">JSON REST Requests</h1><div class="body"><p class="p">Widgets and apps can communicate with a mobile phone via <a class="xref" href="https://en.wikipedia.org/wiki/Bluetooth_low_energy" target="_blank">Bluetooth low energy</a> (BLE). The mobile phone may be sharing data with the device, or it may act as a bridge between the app and the Internet. This allows the mobile phone to become part of the wearable web.</p><p class="p">There are also high-level interfaces for making JSON and image requests. This allows developers the option of developing a wearable web app without having to write their own companion phone app.</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry" id="json-rest-requests__entry__1">API</th><th class="entry" id="json-rest-requests__entry__2">Purpose</th><th class="entry" id="json-rest-requests__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry" headers="json-rest-requests__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeWebRequest-instance_function" target="_blank">Communications.makeWebRequest()</a></td><td class="entry" headers="json-rest-requests__entry__2">Make an asynchronous JSON REST request to a web service</td><td class="entry" headers="json-rest-requests__entry__3">1.3.0</td></tr><tr class="row"><td class="entry" headers="json-rest-requests__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeImageRequest-instance_function" target="_blank">Communications.makeImageRequest()</a></td><td class="entry" headers="json-rest-requests__entry__2">Download an image from the web</td><td class="entry" headers="json-rest-requests__entry__3">1.2.0</td></tr><tr class="row"><td class="entry" headers="json-rest-requests__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#openWebPage-instance_function" target="_blank">Communications.openWebPage()</a></td><td class="entry" headers="json-rest-requests__entry__2">Commands Connect Mobile to ask the user to view a web link</td><td class="entry" headers="json-rest-requests__entry__3">1.3.0</td></tr></tbody></table></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="json-rest-requests-via-mobile-proxy"><h2 class="title topictitle2" id="ariaid-title2">JSON REST Requests via Mobile Proxy</h2><div class="body"><p class="p">Monkey C exposes a high level APIs to allow calls to basic web services through Garmin Connect Mobile via the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeWebRequest-instance_function" target="_blank">Communications.makeWebRequest()</a> and <span class="xref"></span> APIs. These APIs expose JSON requests and image requests as very straightforward APIs for making REST API calls. The JSON calls are converted to serialized Monkey C data and sent across the BLE pipe. You must have set the <code class="ph codeph">Communications</code> permission to use this API.</p><p class="p"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeWebRequest-instance_function" target="_blank">Communications.makeWebRequest()</a> provides a high level API for making a JSON REST request to an endpoint.  The call is asynchronous and requires a callback to receive the data once the operation completes.</p><pre class="pre codeblock typescript"><code>// It is common for developers to wrap a makeWebRequest() call in a function
// as displayed below. The function defines the variables for each of the
// necessary arguments in a Communications.makeWebRequest() call, then passes
// these variables as the arguments. This allows for a clean layout of your web
// request and expandability.
import Toybox.System;
import Toybox.Communications;
import Toybox.Lang;

class JsonTransaction {
    // set up the response callback function
    function onReceive(responseCode as Number, data as Dictionary?) as Void {
        if (responseCode == 200) {
            System.println("Request Successful");                   // print success
        } else {
            System.println("Response: " + responseCode);            // print response code
        };

    };

    function makeRequest() as Void {
        var url = "https://www.garmin.com";                         // set the url

        var params = {                                              // set the parameters
            "definedParams" =&gt; "123456789abcdefg"
        };

        var options = {                                             // set the options
            :method =&gt; Communications.HTTP_REQUEST_METHOD_GET,      // set HTTP method
            :headers =&gt; {                                           // set headers
            "Content-Type" =&gt; Communications.REQUEST_CONTENT_TYPE_URL_ENCODED},
            // set response type
            :responseType =&gt; Communications.HTTP_RESPONSE_CONTENT_TYPE_URL_ENCODED
        };

        var responseCallback = method(:onReceive);                  // set responseCallback to
        // onReceive() method
        // Make the Communications.makeWebRequest() call
        Communications.makeWebRequest(url, params, options, method(:onReceive));
    }
}</code></pre><p class="p"><span class="xref"></span> offers a similar API for making an image request. The images can be processed by the system, including applying a palette and dithering.</p><pre class="pre codeblock typescript"><code>import Toybox.System;
import Toybox.Communications;
import Toybox.WatchUi;

class ImageTransaction {
    var image as BitmapResource?;
    var responseCode as Number?;

    // Set up the responseCallback function to return an image or null
    function responseCallback(responseCode as Number, data as BitmapResource?) {
        responseCode = responseCode;
        if (responseCode == 200) {
            image = data;
        } else {
            image = null;
        }
    }

    // wrap the request in a function
    function makeRequest() as Void {
        // set the image url
        var url = "http://www.garmin.com/image-path";
        // set the parameters
        var parameters = null;
        // set the options
        var options = {
            // set the palette
            :palette =&gt; [ Gfx.COLOR_ORANGE,
                          Gfx.COLOR_DK_BLUE,
                          Gfx.COLOR_BLUE,
                          Gfx.COLOR_BLACK
                        ],
            // set the max width
            :maxWidth =&gt; 100,
            // set the max height
            :maxHeight =&gt; 100,
            // set the dithering
            :dithering =&gt; Communications.IMAGE_DITHERING_NONE
        };

        // Make the image request
        Communications.makeImageRequest(url, parameters, options, method(:responseCallback));
    }
}</code></pre><p class="p">For more see the <code class="ph codeph">WebRequest</code> sample app distributed with the SDK.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="directing-users-to-web-content"><h2 class="title topictitle2" id="ariaid-title3">Directing Users to Web Content</h2><div class="body"><p class="p">The <span class="xref"></span> call can be used to direct the user to a specific web page on the paired mobile device. When called, the specified web page should be fetched and displayed in the phones default browser. There is no callback for this function and the watch app has no method for checking if the call was completed on the phone successfully.</p></div></article></article></main></div>
</body>
</html>
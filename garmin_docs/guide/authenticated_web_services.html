<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Authenticated Web Services - Garmin Connect IQ Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        h1 { color: #333; }
        pre { background-color: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        img { max-width: 100%; }
    </style>
</head>
<body>
    <h1>Authenticated Web Services</h1>
    <div class="c0123 c0126">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta charset="utf-8"/><meta content="(C) Copyright 2025" name="copyright"/><meta content="(C) Copyright 2025" name="DC.rights.owner"/><meta content="topic" name="DC.type"/><meta content="HTML5" name="DC.format"/><meta content="authenticated-web-services" name="DC.identifier"/><link href="../../commonltr.css" rel="stylesheet" type="text/css"/><title>Authenticated Web Services</title><main role="main"><article aria-labelledby="ariaid-title1" role="article"><h1 class="title topictitle1" id="ariaid-title1">Authenticated Web Services</h1><div class="body"><p class="p">There are countless web services available to developers that use either OAuth to provide access control. Connect IQ has OAuth APIs in the <strong class="ph b">Communications</strong> module that allow widgets and device apps to make authenticated calls.</p></div><article aria-labelledby="ariaid-title2" class="topic nested1" id="oauth-101"><h2 class="title topictitle2" id="ariaid-title2">OAuth 101</h2><div class="body"><p class="p">OAuth provides a standard way for developers to authenticate to gain access to web APIs. Before an app can access the web API, the developer must register the app with the service. During registration you must provide a redirect URL that will be used to retrieve the credentials. Once registered the app will provide a <em class="ph i">client id</em> and <em class="ph i">secret</em>, which are necessary for the login process.</p><img class="image" src="/connect-iq/resources/programmers-guide/oauth_flow.png"/><br/><p class="p">To access the web service, the app must authenticate the user. To do this, the app redirects the user's web browser to the web service authentication page, providing the secret, the client id, and the redirect URL. After the service has authenticated the user, it redirects their browser back to the client providing an access token. The access token can then be used in subsequent calls to the web service.</p></div></article><article aria-labelledby="ariaid-title3" class="topic nested1" id="oauth-and-wearables"><h2 class="title topictitle2" id="ariaid-title3">OAuth and Wearables</h2><div class="body"><p class="p">The OAuth standard is based on the world of web browsers and mobile applications, but in general people don't want to enter their username and password on their watch. Connect IQ has added some new APIs to allow you to write OAuth enabled apps:</p><table class="table"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry" id="oauth-and-wearables__entry__1">Operation</th><th class="entry" id="oauth-and-wearables__entry__2">Function</th><th class="entry" id="oauth-and-wearables__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry" headers="oauth-and-wearables__entry__1">Request credentials from an OAuth 2.0 web endpoint</td><td class="entry" headers="oauth-and-wearables__entry__2"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeOAuthRequest-instance_function" target="_blank">Communications.makeOAuthRequest()</a></td><td class="entry" headers="oauth-and-wearables__entry__3">1.3.0</td></tr><tr class="row"><td class="entry" headers="oauth-and-wearables__entry__1">Request credentials from an OAuth 2.0 web endpoint</td><td class="entry" headers="oauth-and-wearables__entry__2"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Authentication.html#makeOAuthRequest-instance_function" target="_blank">Authentication.makeOAuthRequest()</a></td><td class="entry" headers="oauth-and-wearables__entry__3">3.3.0</td></tr><tr class="row"><td class="entry" headers="oauth-and-wearables__entry__1">Register a callback to receive OAuth credentials upon user completion</td><td class="entry" headers="oauth-and-wearables__entry__2"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#registerForOAuthMessages-instance_function" target="_blank">Communications.registerForOAuthMessages()</a></td><td class="entry" headers="oauth-and-wearables__entry__3">1.3.0</td></tr><tr class="row"><td class="entry" headers="oauth-and-wearables__entry__1">Register a callback to receive OAuth credentials upon user completion</td><td class="entry" headers="oauth-and-wearables__entry__2"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Authentication.html#registerForOAuthMessages-instance_function" target="_blank">Authentication.registerForOAuthMessages()</a></td><td class="entry" headers="oauth-and-wearables__entry__3">3.3.0</td></tr></tbody></table><p class="p">The <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeOAuthRequest-instance_function" target="_blank">Communications.makeOAuthRequest()</a> and <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Authentication.html#makeOAuthRequest-instance_function" target="_blank">Authentication.makeOAuthRequest()</a> calls are intended for implementing credential entry step of the OAuth 1.0 &amp; 2.0 standard.  Be sure to use the following redirects when using the <code class="ph codeph">makeOAuthRequest</code> call:</p><table class="table"><caption></caption><colgroup><col/><col/></colgroup><thead class="thead"><tr class="row"><th class="entry" id="oauth-and-wearables__entry__16">API</th><th class="entry" id="oauth-and-wearables__entry__17">Redirect</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry" headers="oauth-and-wearables__entry__16"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeOAuthRequest-instance_function" target="_blank">Communications.makeOAuthRequest()</a></td><td class="entry" headers="oauth-and-wearables__entry__17"><code class="ph codeph">http://localhost</code></td></tr><tr class="row"><td class="entry" headers="oauth-and-wearables__entry__16"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Authentication.html#makeOAuthRequest-instance_function" target="_blank">Authentication.makeOAuthRequest()</a></td><td class="entry" headers="oauth-and-wearables__entry__17"><code class="ph codeph">connectiq://oauth</code></td></tr></tbody></table><p class="p">When called, the user will receive a phone notification that your app wants to log into a web service. Clicking on this notification will take the user to a web view within Garmin Connect mobile app (<code class="ph codeph">Communications.makeOAuthRequest()</code>) or the Connect IQ Store mobile app (<code class="ph codeph">Authentication.makeOAuthRequest()</code>), where they can enter their log in information.</p><img class="image" src="/connect-iq/resources/programmers-guide/oauth_notification.png"/><br/><p class="p">During this time, the Connect IQ app should display a page directing the user to open the respective application. Once the user has completed credential entry, Connect will send back the tokens specified in the <code class="ph codeph">resultKeys</code> option, and direct them back to the wearable.</p><img class="image" src="/connect-iq/resources/programmers-guide/oauth_complete.png"/><br/><p class="p">Your app should call <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#registerForOAuthMessages-instance_function" target="_blank">Communications.registerForOAuthMessages()</a> or <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Authentication.html#registerForOAuthMessages-instance_function" target="_blank">Authentication.registerForOAuthMessages()</a> to receive the result of the login process. Logging in can take a long time, and a widget may time out before the user completes the login step. If your app closes before the login process completes, the result will be cached on the device until the next time your app calls <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#registerForOAuthMessages-instance_function" target="_blank">Communications.registerForOAuthMessages()</a>, at which point the result will be passed to your callback immediately. Once you have the access token, you can use it as an argument to <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Communications.html#makeWebRequest-instance_function" target="_blank">Communications.makeWebRequest()</a>.</p></div></article></article></main></div>
</body>
</html>